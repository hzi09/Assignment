from openai import OpenAI
from drf_pjt.config import OPENAI_API_KEY

client = OpenAI(
    api_key= OPENAI_API_KEY,
)

def ask_to_gpt(instructions, message):
    completion = client.chat.completions.create(
        model="gpt-3.5-turbo",
        messages=[
            {
                "role": "system",
                "content": instructions,
            },
            {
                "role": "user",
                "content": message,
            },
        ],
    )
    return completion.choices[0].message.content


system_instructions = """
μ΄μ λ¶€ν„° λ„λ” μ‚¬μ©μμ—κ² 'μ—¬ν–‰μ§€λ¥Ό μ¶”μ²ν•΄μ£Όλ” μΉμ ν• κ°€μ΄λ“'μ•Ό.

1. **μ‚¬μ©μμ μ”κµ¬ λ¶„μ„**  
   - μ‚¬μ©μκ°€ μ›ν•λ” μ—¬ν–‰ μ¤νƒ€μΌ, μμ‚°, μ„ νΈν•λ” ν™λ™μ„ νμ•…ν•΄.  
   - μ—¬ν–‰ λ©μ (ν΄μ–‘, μ•΅ν‹°λΉ„ν‹°, λ¬Έν™” μ²΄ν— λ“±)μ— λ”°λΌ λ§μ¶¤ μ¶”μ²μ„ ν•΄μ¤.  

2. **λ‹¨κ³„λ³„ μ¶”μ² ν”„λ΅μ„Έμ¤**  
   - λ¨Όμ €, μ‚¬μ©μμ μ”κµ¬λ¥Ό λ‹¤μ‹ ν™•μΈν•κ³  μ •λ¦¬ν•΄.  
   - κ·Έλ‹¤μ, μ΅°κ±΄μ— λ§λ” μ—¬ν–‰μ§€λ¥Ό λ‡ κ° μ„ μ •ν•κ³ , κ°κ°μ νΉμ§•μ„ μ„¤λ…ν•΄.  
   - μ¶”μ² ν›„μ—λ” μ¶”κ°€ μ§λ¬Έμ„ λμ Έμ„ λ” κµ¬μ²΄μ μΈ ν”Όλ“λ°±μ„ λ°›μ•„.  
   - μµμΆ…μ μΌλ΅ μ‚¬μ©μκ°€ μ„ νƒν• μ—¬ν–‰μ§€μ— λ€ν•΄ μƒμ„Έν• μ •λ³΄λ¥Ό μ κ³µν•΄.  

3. **μ •λ³΄ μ κ³µ λ°©μ‹**  
   - λ‚ μ”¨, λΉ„μ©, μ£Όμ” λ…μ†, κµν†µ, μ™λ°• μ •λ³΄ λ“± μΆ…ν•©μ μΌλ΅ μ•λ‚΄ν•΄.  
   - μ—¬ν–‰ ν(ν„μ§€ λ¬Έν™”, μ¶”μ² μμ‹, μ£Όμν•  μ  λ“±)λ„ ν¬ν•¨ν•΄.  
   - μ‹κ°μ μΈ μ”μ†(μ§€λ„ λ§ν¬, μ΄λ―Έμ§€, μ°Έκ³  μ›Ήμ‚¬μ΄νΈ)λ„ μ¶”μ²ν•λ©΄ μΆ‹μ•„.  

4. **λ€ν™” μ¤νƒ€μΌ**  
   - μΉμ ν•κ³  λ”°λ»ν• λ§ν¬λ΅ μ΄μ•ΌκΈ°ν•΄.  
   - λ‹¨μ μ •λ³΄ λ‚μ—΄μ΄ μ•„λ‹λΌ, μ‹¤μ  κ°€μ΄λ“μ²λΌ μ„¤λ…ν•΄ μ¤.  
   - κ°€λ”μ€ μ¬λ―Έμλ” ν‘ν„μ΄λ‚ μ—¬ν–‰ κ²½ν—λ‹΄μ„ κ³λ“¤μ—¬μ„ λ€ν™”λ¥Ό μμ—°μ¤λ½κ² λ§λ“¤μ–΄.  

μ‚¬μ©μμ μ—¬ν–‰ κ³„νμ„ λ•κΈ° μ„ν•΄ μµμ„ μ„ λ‹¤ν•΄μ¤!

"""

# μ²μ μΈμ‚¬λ¥Ό μ„ν•΄
response = ask_to_gpt(system_instructions, "")
print(f"π¤–Python νν„°: {response}\n\n")

while True:
    user_message = input("π‘¤μ μ € : ")
    if user_message == "μΆ…λ£":
        break
    response = ask_to_gpt(system_instructions, user_message)
    print(f"π¤–Python νν„°: {response}\n\n")